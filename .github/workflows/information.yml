
name: Information
# env:
#   # Enabling runner diagnostic logging
#   ACTIONS_RUNNER_DEBUG: true
#   # Enabling step debug logging
#   ACTIONS_STEP_DEBUG: true


on: [push, pull_request]

jobs:

  information_ubuntu_latest:
    name: Ubuntu Knowledge About everything
    runs-on: ubuntu-latest

    steps:

      - name: Ubuntu Debugging Force
        shell: bash
        run:
          set -x -v -e;
          pwd;
          echo ${GITHUB_WORKSPACE};
          echo Hello > Hello.txt;
          ls -alrt;
          cat Hello.txt;
          export;
          cd /;
          pwd;
          ls -alrt;
          echo "VARA=vara" >> $GITHUB_ENV;
          echo "VARB=varb" >> $GITHUB_ENV;

      - name: Ubuntu Dump github context global data
        shell: bash
        run: |
          set -x -v -e
          pwd
          ls -alrt
          echo "$GITHUB_CONTEXT" 
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}

      - name: Ubuntu Dump runner context global data
        shell: bash
        run: echo "$RUNNER_CONTEXT"
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}

      - name: Ubuntu Dump secrets
        shell: bash
        run: |
          echo "$SECRETS"
        env:
          SECRETS: ${{ toJSON(secrets) }}

      - name: Ubuntu Dump .Env vars
        shell: bash
        run: |
          echo "$VARS"
        env:
          VARS: ${{ toJSON(vars) }}


  debug_powershell:
    name: Debugging Powershell
    runs-on: windows-latest
    steps:
      - name: Windows Poweshell echo test
        run: |
          Start-Transcript -Path ran.txt -IncludeInvocationHeader
          Set-PSDebug -Trace 2

          dir
          pwd
          echo "${env:GITHUB_WORKSPACE}"
          dir
          pwd
          dir
          echo "$(pwd)"
          echo "$(dir)"
          cd "C:\"
          pwd
          dir
          echo "$(pwd)"
          echo "$(dir)"

          Get-Content -Path "${env:GITHUB_WORKSPACE}\ran.txt"
          Stop-Transcript
          Set-PSDebug -Trace 0

  information_windows_latest:
    name: Windows Knowledge About everything
    runs-on: windows-latest

    steps:
      - name: Windows Dump github env global data
        shell: cmd
        run: |
          echo on
          echo Hi
          echo Hello > Hello.txt
          rem does not work
          rem setx GREETING Hello /m
          type Hello.txt
          echo %CD%
          cd "C:\"
          echo %CD%
          printf "VARA=vara" >> %GITHUB_ENV%
          printf "VARB=varb" >> %GITHUB_ENV%

      - name: Windows Dump github context global data
        shell: cmd
        run: |
          echo on
          echo %CD%
          rem does not work
          echo GREETING %GREETING%
          echo %GITHUB_CONTEXT%
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}

      - name: Windows Dump runner context global data
        shell: cmd
        run: echo %RUNNER_CONTEXT%
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}

      - name: Windows Dump secrets
        shell: cmd
        run: echo %SECRETS%
        env:
          SECRETS: ${{ toJSON(secrets) }}

      - name: Windows Dump env. vars
        shell: cmd
        run: echo %VARS%
        env:
          VARS: ${{ toJSON(vars) }}


  information_macos_latest:
    name: MacOS Knowledge About everything
    runs-on: macos-latest

    steps:
      - name: MacOS Dump github env global data
        shell: bash
        run: |
          set -x -v -e
          pwd
          export
          cd /
          pwd
          echo "VARA=vara" >> $GITHUB_ENV
          echo "VARB=varb" >> $GITHUB_ENV

      - name: MacOS Dump github context global data
        shell: bash
        run: |
          set -x -v -e
          pwd
          echo "$GITHUB_CONTEXT"
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}

      - name: MacOS Dump runner context global data
        shell: bash
        run: |
          echo "$RUNNER_CONTEXT"
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}

      - name: MacOS Dump secrets
        shell: bash
        run: |
          echo "$SECRETS"

        env:
          SECRETS: ${{ toJSON(secrets) }}

      - name: MacOS Dump .Env vars
        shell: bash
        run: |
          echo "$VARS"
          echo VARA value is ${VARA}
          echo VARB value is ${VARB}
        env:
          VARS: ${{ toJSON(vars) }}
